@import "tailwindcss";

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer components {
  /* Mono Gradient System (Warm Neutral) */
  .mono-gradient {
    background: linear-gradient(
      225deg,
      hsl(var(--mono-gradient-start)) 0%,
      hsl(var(--mono-gradient-end)) 100%
    );
  }

  .mono-gradient-text {
    background: linear-gradient(
      225deg,
      hsl(var(--mono-gradient-start)) 0%,
      hsl(var(--mono-gradient-end)) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Flow UI Animation Utilities */
  .flow-ui-hover-lift {
    @apply transition-all duration-300 ease-in-out hover:-translate-y-0.5 hover:shadow-lg;
  }

  .flow-ui-active-scale {
    @apply active:scale-[0.98] transition-transform duration-100;
  }

  /* =========================================
     GAME CARD STYLES
     Collectible card game aesthetic
     ========================================= */

  .game-card {
    @apply relative overflow-hidden rounded-xl;
    background: linear-gradient(145deg,
      hsl(var(--card)) 0%,
      hsl(var(--card)) 100%);
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -2px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .game-card::before {
    content: '';
    @apply absolute inset-0 rounded-xl pointer-events-none;
    border: 2px solid transparent;
    background: linear-gradient(135deg,
      rgba(255, 255, 255, 0.2) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      rgba(0, 0, 0, 0.05) 100%) border-box;
    -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }

  /* Ingredient card - Blue rarity */
  .game-card-ingredient {
    --card-accent: 210 100% 50%;
    --card-accent-light: 210 100% 95%;
    --card-glow: 210 100% 60%;
    border: 2px solid hsl(210 60% 50% / 0.5);
  }

  .game-card-ingredient::after {
    content: '';
    @apply absolute inset-0 rounded-xl pointer-events-none opacity-0 transition-opacity duration-300;
    box-shadow:
      0 0 20px 2px hsl(var(--card-glow) / 0.3),
      inset 0 0 20px 2px hsl(var(--card-glow) / 0.1);
  }

  .game-card-ingredient:hover::after {
    @apply opacity-100;
  }

  /* Recipe card - Green rarity (epic) */
  .game-card-recipe {
    --card-accent: 140 70% 40%;
    --card-accent-light: 140 70% 95%;
    --card-glow: 140 70% 50%;
    border: 2px solid hsl(140 50% 40% / 0.5);
  }

  .game-card-recipe::after {
    content: '';
    @apply absolute inset-0 rounded-xl pointer-events-none opacity-0 transition-opacity duration-300;
    box-shadow:
      0 0 20px 2px hsl(var(--card-glow) / 0.3),
      inset 0 0 20px 2px hsl(var(--card-glow) / 0.1);
  }

  .game-card-recipe:hover::after {
    @apply opacity-100;
  }

  /* Card frame border effect */
  .game-card-frame {
    @apply absolute inset-1 rounded-lg pointer-events-none;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Card art area */
  .game-card-art {
    @apply relative overflow-hidden;
    aspect-ratio: 4/3;
  }

  .game-card-art::after {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(
      to bottom,
      transparent 60%,
      rgba(0, 0, 0, 0.4) 100%
    );
  }

  /* Card art for ingredient */
  .game-card-art-ingredient {
    background: linear-gradient(
      135deg,
      hsl(210 80% 25%) 0%,
      hsl(210 60% 35%) 50%,
      hsl(210 80% 20%) 100%
    );
  }

  /* Card art for recipe */
  .game-card-art-recipe {
    background: linear-gradient(
      135deg,
      hsl(140 60% 20%) 0%,
      hsl(140 50% 30%) 50%,
      hsl(140 60% 15%) 100%
    );
  }

  /* Card title banner */
  .game-card-title {
    @apply relative px-3 py-2;
    background: linear-gradient(
      to right,
      rgba(0, 0, 0, 0.6) 0%,
      rgba(0, 0, 0, 0.4) 50%,
      rgba(0, 0, 0, 0.6) 100%
    );
  }

  .game-card-title::before,
  .game-card-title::after {
    content: '';
    @apply absolute left-0 right-0 h-px;
    background: linear-gradient(
      to right,
      transparent 0%,
      rgba(255, 255, 255, 0.3) 50%,
      transparent 100%
    );
  }

  .game-card-title::before {
    top: 0;
  }

  .game-card-title::after {
    bottom: 0;
  }

  /* Card stats badge */
  .game-card-stat {
    @apply inline-flex items-center justify-center px-2.5 py-1 rounded-full text-sm font-bold;
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.7) 0%,
      rgba(0, 0, 0, 0.5) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.2);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  }

  .game-card-stat-ingredient {
    @apply text-blue-200;
    border-color: hsl(210 60% 50% / 0.5);
  }

  .game-card-stat-recipe {
    @apply text-green-200;
    border-color: hsl(140 50% 40% / 0.5);
  }

  /* Card body/content area */
  .game-card-body {
    @apply p-3;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0.5) 100%
    );
  }

  /* Card rarity indicator */
  .game-card-rarity {
    @apply absolute top-2 right-2 w-3 h-3 rounded-full;
    box-shadow: 0 0 8px 2px currentColor;
  }

  .game-card-rarity-ingredient {
    @apply bg-blue-400 text-blue-400;
  }

  .game-card-rarity-recipe {
    @apply bg-green-400 text-green-400;
  }

  /* Card hover effects */
  .game-card-hover {
    @apply transition-all duration-300 ease-out;
  }

  .game-card-hover:hover {
    @apply -translate-y-1;
    box-shadow:
      0 10px 25px -5px rgba(0, 0, 0, 0.2),
      0 8px 10px -6px rgba(0, 0, 0, 0.1);
  }

  /* Drag overlay game card */
  .game-card-dragging {
    @apply rotate-3;
    box-shadow:
      0 25px 50px -12px rgba(0, 0, 0, 0.4),
      0 0 30px 5px hsl(var(--card-glow) / 0.2);
  }

  /* Small card variant (for right panel) */
  .game-card-sm .game-card-art {
    aspect-ratio: 16/9;
  }

  .game-card-sm .game-card-title {
    @apply px-3 py-2;
  }

  .game-card-sm .game-card-body {
    @apply p-3;
  }

  .game-card-sm .game-card-stat {
    @apply text-xs px-2 py-0.5;
  }

  /* Dark mode adjustments */
  .dark .game-card {
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.3),
      0 2px 4px -2px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  .dark .game-card::before {
    background: linear-gradient(135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.02) 50%,
      rgba(0, 0, 0, 0.1) 100%) border-box;
  }

  /* Status Label Utilities */
  .status-label,
  .status-draft,
  .status-testing,
  .status-approved,
  .status-archived,
  .status-active,
  .status-inactive,
  .status-optimal,
  .status-low,
  .status-excess {
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    transition: color 200ms, background-color 200ms;
  }

  /* Recipe Lifecycle Status Classes */
  .status-draft {
    background-color: hsl(var(--status-draft-bg));
    color: hsl(var(--status-draft));
  }

  .status-testing {
    background-color: hsl(var(--status-testing-bg));
    color: hsl(var(--status-testing));
  }

  .status-approved {
    background-color: hsl(var(--status-approved-bg));
    color: hsl(var(--status-approved));
  }

  .status-archived {
    background-color: hsl(var(--status-archived-bg));
    color: hsl(var(--status-archived));
  }

  /* Ingredient Status Classes */
  .status-active {
    background-color: hsl(var(--status-active-bg));
    color: hsl(var(--status-active));
  }

  .status-inactive {
    background-color: hsl(var(--status-inactive-bg));
    color: hsl(var(--status-inactive));
  }

  /* Inventory Status Classes */
  .status-optimal {
    background-color: hsl(var(--status-optimal-bg));
    color: hsl(var(--status-optimal));
  }

  .status-low {
    background-color: hsl(var(--status-low-bg));
    color: hsl(var(--status-low));
  }

  .status-excess {
    background-color: hsl(var(--status-excess-bg));
    color: hsl(var(--status-excess));
  }
}

@layer base {
  :root {
    /* ========================================= */
    /* PREPPER DESIGN SYSTEM - COLOR TOKENS     */
    /* Kitchen-first recipe workspace           */
    /* ========================================= */

    /* -----------------------------------------
       CORE BRAND COLORS - Foundation
       All status/semantic colors reference these
       ----------------------------------------- */

    /* Terracotta - Primary, warm kitchen feel */
    --color-terracotta: 15 65% 50%;
    --color-terracotta-light: 15 65% 95%;
    --color-terracotta-dark: 15 65% 38%;

    /* Green - Success, approved, fresh */
    --color-green: 140 50% 35%;
    --color-green-light: 140 50% 92%;
    --color-green-dark: 140 50% 25%;

    /* Teal - Info, testing, in-progress */
    --color-teal: 160 50% 40%;
    --color-teal-light: 160 50% 95%;
    --color-teal-dark: 160 50% 30%;

    /* Amber - Warning, attention needed */
    --color-amber: 35 80% 50%;
    --color-amber-light: 35 80% 95%;
    --color-amber-dark: 35 80% 35%;

    /* Red - Error, archived, out of stock */
    --color-red: 0 70% 47%;
    --color-red-light: 0 70% 95%;
    --color-red-dark: 0 70% 35%;

    /* Slate - Neutral, draft */
    --color-slate: 220 10% 50%;
    --color-slate-light: 220 10% 95%;
    --color-slate-dark: 220 10% 35%;

    /* Sage - Accent, herbs/freshness */
    --color-sage: 120 25% 45%;
    --color-sage-light: 120 25% 95%;
    --color-sage-dark: 120 25% 32%;

    /* -----------------------------------------
       BASE SEMANTIC COLORS - Light Mode
       ----------------------------------------- */

    /* Background & Foreground - Warm parchment */
    --background: 40 30% 97%;
    --foreground: 220 20% 13%;

    /* Primary Action - Terracotta */
    --primary: var(--color-terracotta);
    --primary-foreground: 0 0% 98%;

    /* Secondary - Warm cream */
    --secondary: 35 20% 94%;
    --secondary-foreground: 220 20% 13%;

    /* Muted - Warm grey for disabled states */
    --muted: 35 15% 94%;
    --muted-foreground: 0 0% 55%;

    /* Accent - Warm highlight */
    --accent: 35 20% 92%;
    --accent-foreground: 220 20% 13%;

    /* Tertiary - Sage for herbs/freshness accent */
    --tertiary: var(--color-sage);
    --tertiary-foreground: 0 0% 98%;
    --tertiary-light: var(--color-sage-light);

    /* Card & Popover - Cream tint */
    --card: 40 25% 96%;
    --card-foreground: 220 20% 13%;
    --popover: 40 25% 96%;
    --popover-foreground: 220 20% 13%;

    /* Destructive */
    --destructive: var(--color-red);
    --destructive-foreground: 0 0% 98%;

    /* Border & Input - Warm borders */
    --border: 35 15% 85%;
    --input: 35 15% 85%;
    --ring: var(--color-terracotta);

    /* Background Contrast */
    --background-contrast: 36 16% 93%;

    /* Border Radius */
    --radius: 0.75rem;

    /* -----------------------------------------
       RECIPE LIFECYCLE STATUS COLORS
       Draft -> Testing -> Approved -> Archived
       ----------------------------------------- */

    --status-draft: var(--color-slate);
    --status-draft-bg: var(--color-slate-light);
    --status-draft-border: var(--color-slate);

    --status-testing: var(--color-teal);
    --status-testing-bg: var(--color-teal-light);
    --status-testing-border: var(--color-teal);

    --status-approved: var(--color-green);
    --status-approved-bg: var(--color-green-light);
    --status-approved-border: var(--color-green);

    --status-archived: var(--color-red);
    --status-archived-bg: var(--color-red-light);
    --status-archived-border: var(--color-red);

    /* -----------------------------------------
       INGREDIENT STATUS COLORS
       ----------------------------------------- */

    --status-active: var(--color-green);
    --status-active-bg: var(--color-green-light);
    --status-active-border: var(--color-green);

    --status-inactive: var(--color-slate);
    --status-inactive-bg: var(--color-slate-light);
    --status-inactive-border: var(--color-slate);

    /* -----------------------------------------
       INVENTORY STATUS COLORS
       ----------------------------------------- */

    --status-optimal: var(--color-green-dark);
    --status-optimal-bg: var(--color-green-light);

    --status-low: var(--color-red);
    --status-low-bg: var(--color-red-light);

    --status-excess: var(--color-amber-dark);
    --status-excess-bg: var(--color-amber-light);

    /* -----------------------------------------
       GRADIENT TOKENS
       ----------------------------------------- */

    --mono-gradient-start: 35 20% 65%;
    --mono-gradient-end: 15 40% 35%;

    /* -----------------------------------------
       DIALOG & OVERLAY
       ----------------------------------------- */

    --dialog-overlay: 30 10% 22% / 0.2;
    --sheet-overlay: 220 20% 10% / 0.7;

    /* -----------------------------------------
       CHART COLORS
       ----------------------------------------- */

    --chart-1: var(--color-terracotta);
    --chart-2: var(--color-teal);
    --chart-3: var(--color-amber);
    --chart-4: var(--color-sage);
    --chart-5: var(--color-red);
  }

  /* =========================================
     DARK MODE
     ========================================= */

  .dark {
    /* Core Brand Colors - Adjusted for dark mode */
    --color-terracotta: 15 65% 60%;
    --color-terracotta-light: 15 65% 15%;
    --color-terracotta-dark: 15 65% 70%;

    --color-green: 140 50% 50%;
    --color-green-light: 140 50% 15%;
    --color-green-dark: 140 50% 65%;

    --color-teal: 160 50% 50%;
    --color-teal-light: 160 50% 15%;
    --color-teal-dark: 160 50% 65%;

    --color-amber: 35 80% 55%;
    --color-amber-light: 35 80% 15%;
    --color-amber-dark: 35 80% 70%;

    --color-red: 0 70% 55%;
    --color-red-light: 0 70% 15%;
    --color-red-dark: 0 70% 70%;

    --color-slate: 220 10% 60%;
    --color-slate-light: 220 10% 15%;
    --color-slate-dark: 220 10% 75%;

    --color-sage: 120 25% 55%;
    --color-sage-light: 120 25% 15%;
    --color-sage-dark: 120 25% 70%;

    /* Base Semantic Colors - Dark Mode */
    --background: 220 20% 8%;
    --foreground: 0 0% 95%;

    --primary: var(--color-terracotta);
    --primary-foreground: 220 20% 8%;

    --secondary: 220 15% 15%;
    --secondary-foreground: 0 0% 95%;

    --muted: 220 15% 15%;
    --muted-foreground: 0 0% 50%;

    --accent: 220 15% 18%;
    --accent-foreground: 0 0% 95%;

    --tertiary: var(--color-sage);
    --tertiary-foreground: 0 0% 95%;
    --tertiary-light: var(--color-sage-light);

    --card: 220 15% 12%;
    --card-foreground: 0 0% 95%;
    --popover: 220 15% 12%;
    --popover-foreground: 0 0% 95%;

    --destructive: var(--color-red);
    --destructive-foreground: 0 0% 95%;

    --border: 220 15% 20%;
    --input: 220 15% 20%;
    --ring: var(--color-terracotta);

    --background-contrast: 220 20% 12%;

    /* Gradient - Adjusted for dark mode */
    --mono-gradient-start: 35 20% 50%;
    --mono-gradient-end: 15 40% 45%;

    /* Dialog Overlay - Darker for dark mode */
    --dialog-overlay: 220 20% 8% / 0.4;
    --sheet-overlay: 220 20% 5% / 0.8;
  }

  /* Auto dark mode (respects system preference when no manual toggle) */
  @media (prefers-color-scheme: dark) {
    :root:not(.light) {
      /* Core Brand Colors - Adjusted for dark mode */
      --color-terracotta: 15 65% 60%;
      --color-terracotta-light: 15 65% 15%;
      --color-terracotta-dark: 15 65% 70%;

      --color-green: 140 50% 50%;
      --color-green-light: 140 50% 15%;
      --color-green-dark: 140 50% 65%;

      --color-teal: 160 50% 50%;
      --color-teal-light: 160 50% 15%;
      --color-teal-dark: 160 50% 65%;

      --color-amber: 35 80% 55%;
      --color-amber-light: 35 80% 15%;
      --color-amber-dark: 35 80% 70%;

      --color-red: 0 70% 55%;
      --color-red-light: 0 70% 15%;
      --color-red-dark: 0 70% 70%;

      --color-slate: 220 10% 60%;
      --color-slate-light: 220 10% 15%;
      --color-slate-dark: 220 10% 75%;

      --color-sage: 120 25% 55%;
      --color-sage-light: 120 25% 15%;
      --color-sage-dark: 120 25% 70%;

      /* Base Semantic Colors - Dark Mode */
      --background: 220 20% 8%;
      --foreground: 0 0% 95%;

      --primary: var(--color-terracotta);
      --primary-foreground: 220 20% 8%;

      --secondary: 220 15% 15%;
      --secondary-foreground: 0 0% 95%;

      --muted: 220 15% 15%;
      --muted-foreground: 0 0% 50%;

      --accent: 220 15% 18%;
      --accent-foreground: 0 0% 95%;

      --tertiary: var(--color-sage);
      --tertiary-foreground: 0 0% 95%;
      --tertiary-light: var(--color-sage-light);

      --card: 220 15% 12%;
      --card-foreground: 0 0% 95%;
      --popover: 220 15% 12%;
      --popover-foreground: 0 0% 95%;

      --destructive: var(--color-red);
      --destructive-foreground: 0 0% 95%;

      --border: 220 15% 20%;
      --input: 220 15% 20%;
      --ring: var(--color-terracotta);

      --background-contrast: 220 20% 12%;

      /* Gradient - Adjusted for dark mode */
      --mono-gradient-start: 35 20% 50%;
      --mono-gradient-end: 15 40% 45%;

      /* Dialog Overlay - Darker for dark mode */
      --dialog-overlay: 220 20% 8% / 0.4;
      --sheet-overlay: 220 20% 5% / 0.8;
    }
  }
}

@theme inline {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-tertiary: hsl(var(--tertiary));
  --color-tertiary-foreground: hsl(var(--tertiary-foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Typography - Three-font primary arsenal */
  --font-sans: "cofo-sans-variable", var(--font-manrope), system-ui, sans-serif;
  --font-mono: "cofo-sans-mono-variable", var(--font-geist-mono), ui-monospace, monospace;
  --font-display: "fractul-variable", var(--font-manrope), system-ui, sans-serif;

  /* Border Radius Scale */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

body {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  font-family: "cofo-sans-variable", var(--font-manrope), system-ui, sans-serif;
}

/* Headings use Fractul display font */
h1, h2, h3, h4, h5, h6 {
  font-family: "fractul-variable", var(--font-manrope), system-ui, sans-serif;
}

/* Focus visible for accessibility */
:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* Custom scrollbar styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--border));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground));
}

.dark ::-webkit-scrollbar-thumb,
:root:not(.light) ::-webkit-scrollbar-thumb {
  background: hsl(220 15% 25%);
}

.dark ::-webkit-scrollbar-thumb:hover,
:root:not(.light) ::-webkit-scrollbar-thumb:hover {
  background: hsl(220 15% 35%);
}

@media (prefers-color-scheme: dark) {
  :root:not(.light) ::-webkit-scrollbar-thumb {
    background: hsl(220 15% 25%);
  }

  :root:not(.light) ::-webkit-scrollbar-thumb:hover {
    background: hsl(220 15% 35%);
  }
}
